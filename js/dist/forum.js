module.exports=function(t){var e={};function a(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(o,s,function(e){return t[e]}.bind(null,s));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=31)}([function(t,e){t.exports=flarum.core.compat.extend},,function(t,e){t.exports=flarum.core.compat["common/app"]},function(t,e){t.exports=flarum.core.compat["components/IndexPage"]},function(t,e){t.exports=flarum.core.compat["helpers/listItems"]},function(t,e){t.exports=flarum.core.compat["components/DiscussionPage"]},function(t,e){t.exports=flarum.core.compat["components/DiscussionListItem"]},,,function(t,e){t.exports=flarum.core.compat["helpers/icon"]},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e){t.exports=flarum.core.compat["components/LinkButton"]},function(t,e){t.exports=flarum.core.compat["components/Dropdown"]},function(t,e){t.exports=flarum.core.compat["utils/DiscussionControls"]},function(t,e){t.exports=flarum.core.compat["helpers/highlight"]},function(t,e){t.exports=flarum.core.compat["components/Link"]},,function(t,e){t.exports=flarum.core.compat["utils/PostControls"]},function(t,e){t.exports=flarum.core.compat["components/SelectDropdown"]},function(t,e){t.exports=flarum.core.compat["components/Navigation"]},function(t,e){t.exports=flarum.core.compat["components/CommentPost"]},function(t,e){t.exports=flarum.core.compat["components/Post"]},function(t,e){t.exports=flarum.core.compat["components/PostStream"]},function(t,e){t.exports=flarum.core.compat["helpers/avatar"]},function(t,e){t.exports=flarum.core.compat["utils/abbreviateNumber"]},function(t,e,a){"use strict";(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.a=a}).call(this,a(30))},,,function(t,e){t.exports=flarum.core.compat["utils/extractText"]},function(t,e){t.exports=flarum.core.compat["utils/humanTime"]},function(t,e){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(t){"object"==typeof window&&(a=window)}t.exports=a},function(t,e,a){"use strict";a.r(e);var o=a(0),s=a(19),n=a.n(s);var r=a(3),i=a.n(r),c=a(11),l=a.n(c),u=a(20),p=a.n(u),d=a(17),f=a.n(d),h=a(12),b=a.n(h),v=a(13),g=a.n(v),y=a(21),N=a.n(y),_=a(4),x=a.n(_),S=a(5),k=a.n(S);function O(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return(a=a.call(t)).next.bind(a);if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}var I=a(6),j=a.n(I),B=a(22),C=a.n(B),D=a(2),A=a.n(D),L=a(18),P=a.n(L),E=a(9),J=a.n(E),R=a(15),T=a.n(R),M=(a(28),a(29),a(23)),$=a.n(M),U=a(14),F=a.n(U),q=a(24),G=a.n(q),H=a(25),V="object"==typeof self&&self&&self.Object===Object&&self,z=(H.a||V||Function("return this")()).Symbol;var K=function(t,e){for(var a=-1,o=null==t?0:t.length,s=Array(o);++a<o;)s[a]=e(t[a],a,t);return s},Q=Array.isArray,W=Object.prototype,X=W.hasOwnProperty,Y=W.toString,Z=z?z.toStringTag:void 0;var tt=function(t){var e=X.call(t,Z),a=t[Z];try{t[Z]=void 0;var o=!0}catch(t){}var s=Y.call(t);return o&&(e?t[Z]=a:delete t[Z]),s},et=Object.prototype.toString;var at=function(t){return et.call(t)},ot=z?z.toStringTag:void 0;var st=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ot&&ot in Object(t)?tt(t):at(t)};var nt=function(t){return null!=t&&"object"==typeof t};var rt=function(t){return"symbol"==typeof t||nt(t)&&"[object Symbol]"==st(t)},it=z?z.prototype:void 0,ct=it?it.toString:void 0;var lt=function t(e){if("string"==typeof e)return e;if(Q(e))return K(e,t)+"";if(rt(e))return ct?ct.call(e):"";var a=e+"";return"0"==a&&1/e==-1/0?"-0":a};var ut=function(t){return null==t?"":lt(t)},mt=/[\\^$.*+?()[\]{}|]/g,pt=RegExp(mt.source);var dt=function(t){return(t=ut(t))&&pt.test(t)?t.replace(mt,"\\$&"):t},ft=a(10),ht=a.n(ft);app.initializers.add("block-cat/portlet-ui",(function(){var t,e;t=app.routes,e=JSON.parse(app.data.resources[0].attributes["block-cat.defaultRoutes"]),Object.keys(t).map((function(t){e.hasOwnProperty(t)&&""!==e[t].path&&(app.routes[t].path=e[t].path)})),Object(o.extend)(i.a.prototype,"navItems",(function(t){var e=JSON.parse(app.forum.attribute("block-cat.defaultSettings")),a=app.search.stickyParams();""!==e.allDiscussionsIcon&&t.has("allDiscussions")&&t.replace("allDiscussions",l.a.component({href:app.route("index",a),icon:e.allDiscussionsIcon},app.translator.trans("core.forum.index.all_discussions_link")),100)})),Object(o.extend)(i.a.prototype,"sidebarItems",(function(t){JSON.parse(app.forum.attribute("block-cat.defaultSettings")).mainPageMenu&&t.has("nav")&&t.remove("nav")})),Object(o.extend)(i.a.prototype,"view",(function(t){JSON.parse(app.forum.attribute("block-cat.defaultSettings")).toolbar&&t.children[1].children[0].children[1].children.shift()})),Object(o.extend)(i.a.prototype,"actionItems",(function(t){var e=JSON.parse(app.forum.attribute("block-cat.defaultSettings"));e.refreshButton&&t.has("refresh")&&t.remove("refresh"),e.markAllAsReadButton&&t.has("markAllAsRead")&&t.remove("markAllAsRead")})),Object(o.extend)(k.a.prototype,"view",(function(t){if(JSON.parse(app.forum.attribute("block-cat.defaultSettings")).discussionMenu)try{t.children[1].children[1].children.shift()}catch(t){}})),Object(o.extend)(k.a.prototype,"sidebarItems",(function(t){var e=JSON.parse(app.forum.attribute("block-cat.defaultSettings"));e.controlsButton&&t.has("controls")&&t.remove("controls"),e.scrubberDiv&&t.has("scrubber")&&t.remove("scrubber")})),Object(o.extend)(p.a.prototype,"headerItems",(function(t){var e=this,a=JSON.parse(app.forum.attribute("block-cat.defaultSettings")),o=f.a.controls(this.attrs.post,this);if(a.discussionControlsToPost&&1===this.attrs.post.number()){var s=this.attrs.post.data.relationships.discussion.data,n=app.store.getById(s.type,s.id),r=g.a.moderationControls(n);r.has("lock")&&r.remove("lock"),r.has("sticky")&&r.remove("sticky"),r.has("rename")&&(r.get("rename").attrs.icon="fas fa-heading"),o.merge(r)}a.postControlsUp&&t.add("controls",m("aside",{className:"Post-actions-top"},m("ul",null,o.toArray().length?m("li",null,m(b.a,{className:"Post-controls-h",buttonClassName:"Button Button--icon Button--flat",menuClassName:"Dropdown-menu--right",icon:"fas fa-ellipsis-h",onshow:function(){return e.$(".Post-actions-top").addClass("open")},onhide:function(){return e.$(".Post-actions-top").removeClass("open")}},o.toArray())):"")))})),Object(o.override)(N.a.prototype,"view",(function(t){var e=this,a=JSON.parse(app.forum.attribute("block-cat.defaultSettings")),o=this.elementAttrs();o.className=this.classes(o.className).join(" ");var s=f.a.controls(this.attrs.post,this);if(a.discussionControlsToPost){if(1===this.attrs.post.number()){var n=this.attrs.post.data.relationships.discussion.data,r=app.store.getById(n.type,n.id),i=g.a.moderationControls(r);i.has("lock")&&i.remove("lock"),i.has("sticky")&&i.remove("sticky"),i.has("rename")&&(i.get("rename").attrs.icon="fas fa-heading"),s.merge(i)}return m("article",o,m("div",null,this.content(),m("aside",{className:"Post-actions"},m("ul",null,x()(this.actionItems().toArray()),s.toArray().length?m("li",null,m(b.a,{className:"Post-controls",buttonClassName:"Button Button--icon Button--flat",menuClassName:"Dropdown-menu--right",icon:"fas fa-ellipsis-h",onshow:function(){return e.$(".Post-actions").addClass("open")},onhide:function(){return e.$(".Post-actions").removeClass("open")}},s.toArray())):"")),m("footer",{className:"Post-footer"},m("ul",null,x()(this.footerItems().toArray())))))}return t()})),Object(o.extend)(j.a.prototype,"view",(function(t){JSON.parse(app.forum.attribute("block-cat.defaultSettings")).postCount&&t.children[2].children.pop()})),Object(o.override)(n.a.prototype,"view",(function(t){if(JSON.parse(app.forum.attribute("block-cat.defaultSettings")).emoldovaButton){var e=app,a=e.history,o=e.pane;return m("div",{className:"Navigation ButtonGroup "+(this.attrs.className||""),onmouseenter:o&&o.show.bind(o),onmouseleave:o&&o.onmouseleave.bind(o)},a.canGoBack()?[this.getBackButton(),this.getPaneButton()]:[m("a",{class:"Button Button--icon hasIcon",href:"https://emoldova.org/",title:"EMoldova",active:"false",type:"button",target:"_self"},m("i",{class:"icon fas fa-home Button-icon"})),this.getDrawerButton()])}return t()})),Object(o.extend)(C.a.prototype,"view",(function(t){JSON.parse(app.forum.attribute("block-cat.defaultSettings")).postReply&&t.children.map((function(e){"reply"===e.key&&t.children.pop()}))})),Object(o.extend)(j.a.prototype,"infoItems",(function(t){JSON.parse(app.forum.attribute("block-cat.defaultSettings")).terminalPost&&t.has("terminalPost")&&t.remove("terminalPost")})),Object(o.extend)(k.a.prototype,"oninit",(function(){JSON.parse(app.forum.attribute("block-cat.defaultSettings")).pane&&app.pane.disable()})),Object(o.extend)(k.a.prototype,"oncreate",(function(){if(JSON.parse(app.forum.attribute("block-cat.defaultSettings")).pane)for(var t,e=O(this.element.children);!(t=e()).done;){var a=t.value;"DiscussionPage-list"===a.className&&a.remove()}})),Object(o.extend)(i.a.prototype,"sidebarItems",(function(t){var e=JSON.parse(A.a.forum.attribute("block-cat.vasiaSettings")),a=document.getElementsByClassName("FormControl");if(null!=a)for(var o=0;o<a.length&&"search"!=a[o].type;o++)a[o].classList.add("shadow-sm"),a[o].classList.add("border-gray-300"),a[o].classList.add("rounded-lg"),a[o].classList.add("py-2"),a[o].classList.add("px-3"),e.add_input_hover_style&&(a[o].classList.add("focus:ring-2"),a[o].classList.add("focus:ring-blue-200"),a[o].classList.add("focus:border-blue-400"));if(e.button_3d_new){var s=document.getElementsByClassName("item-newDiscussion")[0];null!=s&&s.classList.add("item-newDiscussion_3d")}else{var n=document.getElementsByClassName("item-newDiscussion")[0];null!=n&&n.classList.add("item-newDiscussion-stackoverflow")}t.has("nav")&&t.remove("nav");for(var r=this.navItems(this).toArray(),i=0;i<r.length;i++)0==e.button_etichete&&"tags"===r[i].itemName&&r.splice(i,1),"separator"===r[i].itemName&&r.splice(i,r.length--);for(var c=this.navItems(this).toArray(),l=0;l<c.length;l++)"separator"===c[l].itemName&&c.splice(0,l+1);if(e.sideNav_shadow){var u=document.getElementsByClassName("nav_Navigation")[0],m=document.getElementsByClassName("nav_Navigation")[1];null!=u&&(u.classList.add("nav_Navigation_shadow"),m.classList.add("nav_Navigation_shadow"))}else{var p=document.getElementsByClassName("sideNav")[0];null!=p&&p.classList.add("sideNav_border")}if(!e.view_hero){var d=document.getElementsByClassName("Hero")[0];null!=d&&d.classList.add("d-none")}if(e.sidenav_fixed){var f=document.getElementsByClassName("sideNav")[0];null!=f&&(f=f.getElementsByTagName("ul")[0]).classList.add("sidenav_fixed")}t.add("nav_Navigation",P.a.component({buttonClassName:"Button",className:"App-titleControl nav_Navigation",accessibleToggleLabel:A.a.translator.trans("core.forum.index.toggle_sidenav_dropdown_accessible_label")},r)),t.add("nav_Categories",P.a.component({buttonClassName:"Button",className:"App-titleControl nav_Navigation",accessibleToggleLabel:A.a.translator.trans("core.forum.index.toggle_sidenav_dropdown_accessible_label")},c))})),Object(o.extend)(k.a.prototype,"view",(function(t){if(JSON.parse(A.a.forum.attribute("block-cat.vasiaSettings")).display_pdf_files){var e=document.getElementsByClassName("span_pdf");if(null!=e)for(var a=0;a<e.length;a++)e[a].classList.add("d-none");var o=document.getElementsByClassName("iframe_pdf");if(o.length>0)for(var s=0;s<o.length;s++)for(var n=0;n<o[s].attributes.length;n++){var r=o[s].innerHTML,i=r.search('<a href="');i+=9;var c=r.length,l=r.substring(i,c),u=l.search(".pdf");u+=4;var m=l.substring(0,u);"src"==o[s].attributes[n].name&&""==o[s].attributes[n].value&&(o[s].attributes[n].value=m)}}else{var p=document.getElementsByClassName("iframe_pdf");if(null!=p)for(var d=0;d<p.length;d++)p[d].classList.add("d-none")}})),Object(o.override)(j.a.prototype,"view",(function(){var t=this.attrs.discussion,e=t.user(),a=t.isUnread(),o=t.isRead(),s=!this.showRepliesCount()&&a,n=0,r=g.a.controls(t,this).toArray(),i=this.elementAttrs();if(this.attrs.params.q){var c=t.mostRelevantPost();c&&(n=c.number());var l=dt(this.attrs.params.q);this.highlightRegExp=new RegExp(l+"|"+l.trim().replace(/\s+/g,"|"),"gi")}else n=Math.min(t.lastPostNumber(),(t.lastReadPostNumber()||0)+1);for(var u,p,d=x()(this.infoItems().toArray())[0],f=0;f<x()(this.infoItems().toArray()).length;f++)x()(this.infoItems().toArray())[f].key&&"terminalPost"==x()(this.infoItems().toArray())[f].key&&(u=x()(this.infoItems().toArray())[f]);p=0!=e?e.data.attributes.displayName:"anonim";var h=JSON.parse(A.a.forum.attribute("block-cat.vasiaSettings"));return h.add_borders&&(i.className+=" D-border"),m("div",i,r.length?b.a.component({icon:"fas fa-ellipsis-v",className:"DiscussionListItem-controls",buttonClassName:"Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right",accessibleToggleLabel:A.a.translator.trans("core.forum.discussion_controls.toggle_dropdown_accessible_label")},r):"",m("span",{className:"Slidable-underneath Slidable-underneath--left Slidable-underneath--elastic"+(a?"":" disabled"),onclick:this.markAsRead.bind(this)},J()("fas fa-check")),m("div",{className:"DiscussionListItem-content Slidable-content"+(a?" unread":"")+(o?" read":"")+(h.remove_additional_space?" D_remove_additional_space":"")},h.buttons_votes_comments_views?m(T.a,{href:A.a.route.discussion(t,n),className:"DiscussionListItem-options"},m("div",{className:"DiscussionListItem-options-blocks"},m("h3",{className:""},F()(t.data.attributes.votes?t.votes():"0",this.highlightRegExp)),m("p",{className:""},A.a.translator.trans("block-cat-default.forum.likes"))),m("div",{className:"DiscussionListItem-options-blocks"},m("h3",{className:""},F()(t.commentCount()-1,this.highlightRegExp)),m("p",{className:""},A.a.translator.trans("block-cat-default.forum.comments"))),m("div",{className:"DiscussionListItem-options-blocks"},m("h3",{className:""},F()(t.viewCount(),this.highlightRegExp)),m("p",{className:""},A.a.translator.trans("block-cat-default.forum.views")))):"",m("ul",{className:"DiscussionListItem-badges badges"},x()(t.badges().toArray())),m(T.a,{href:A.a.route.discussion(t,n),className:"DiscussionListItem-main"},m("h3",{className:"DiscussionListItem-title"},F()(t.title(),this.highlightRegExp)),h.view_tags&&!h.tags_bottom?m("ul",{className:"DiscussionListItem-info-tags"},d):"",m("ul",{className:"DiscussionListItem-info"},x()(this.infoItems().toArray())[x()(this.infoItems().toArray()).length-1]),m("div",{className:"DiscussionListItem_tags_and_author"},h.view_tags&&h.tags_bottom?m("ul",{className:"DiscussionListItem-info-tags"},d):"",m("div",{className:"DiscussionListItem-options-author"},m(T.a,{className:"author-link",href:e?A.a.route.user(e):"#"},$()(e,{title:""}),m("div",null,m("p",null,p),m("p",null,x()(u))))))),m("span",{tabindex:"0",role:"button",className:"DiscussionListItem-count",onclick:this.markAsRead.bind(this),title:s?A.a.translator.trans("core.forum.discussion_list.mark_as_read_tooltip"):""},G()(t[s?"unreadCount":"replyCount"]()))))})),Object(o.extend)(i.a.prototype,"viewItems",(function(t){var e=JSON.parse(A.a.forum.attribute("block-cat.vasiaSettings"));e.show_item_sort?e.modify_item_sort&&(t.has("sort")&&t.remove("sort"),t.add("Noi",l.a.component({title:"Noi",className:"Button Button--primary",href:"?sort=newest"},A.a.translator.trans("block-cat-default.forum.sort_button_3"))),t.add("Vechi",l.a.component({title:"Vechi",className:"Button Button--primary",href:"?sort=oldest"},A.a.translator.trans("block-cat-default.forum.sort_button_4")))):t.has("sort")&&t.remove("sort")})),Object(o.extend)(i.a.prototype,"sidebarItems",(function(t){JSON.parse(A.a.forum.attribute("block-cat.vasiaSettings")).button_adauga_right&&t.has("newDiscussion")&&t.remove("newDiscussion")})),Object(o.extend)(i.a.prototype,"actionItems",(function(t){var e=this;if(JSON.parse(A.a.forum.attribute("block-cat.vasiaSettings")).button_adauga_right){var a=A.a.forum.attribute("canStartDiscussion")||!A.a.session.user;t.add("newDiscussion",ht.a.component({icon:"fas fa-edit",className:"Button Button--primary IndexPage-newDiscussion",itemClassName:"App-primaryControl",onclick:function(){return e.newDiscussionAction().catch((function(){}))},disabled:!a},A.a.translator.trans(a?"core.forum.index.start_discussion_button":"core.forum.index.cannot_start_discussion_button")))}}))}),-20)}]);
//# sourceMappingURL=forum.js.map