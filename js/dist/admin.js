module.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=46)}({1:function(t,e){t.exports=flarum.core.compat.app},10:function(t,e){t.exports=flarum.core.compat["helpers/icon"]},11:function(t,e,n){"use strict";function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}n.d(e,"a",(function(){return s}))},18:function(t,e){t.exports=flarum.core.compat["components/Switch"]},19:function(t,e){t.exports=flarum.core.compat["common/components/Alert"]},39:function(t,e){t.exports=flarum.core.compat["common/components/ExtensionPage"]},40:function(t,e){t.exports=flarum.core.compat["components/Button"]},41:function(t,e){t.exports=flarum.core.compat["utils/saveSettings"]},46:function(t,e,n){"use strict";n.r(e);var a=n(11),s=n(39),o=n.n(s),r=n(1),i=n.n(r),l=n(18),u=n.n(l),c=n(40),d=n.n(c),f=n(41),p=n.n(f),g=n(9),h=n.n(g),b=n(10),y=n.n(b),_=n(19),v=n.n(_),x=function(t){function e(){return t.apply(this,arguments)||this}Object(a.a)(e,t);var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),this.settings=JSON.parse(i.a.data.settings["block-cat.default_settings"]),this.routes=JSON.parse(i.a.data.settings["block-cat.default_routes"]),this.loading=!1,this.modified=!1,this.settingStates={hideMainPageMenu:0,hideToolBar:0,hideDiscussionMenu:0},this.sameValue={},Object.keys(this.settings).map((function(t){"mainPageMenu"===t&&(n.settingStates.hideMainPageMenu=n.settings[t]),"toolbar"===t&&(n.settingStates.hideToolBar=n.settings[t]),"discussionMenu"===t&&(n.settingStates.hideDiscussionMenu=n.settings[t])}))},n.content=function(){var t=this,e=i.a.translator.trans("core.admin.basics.all_discussions_label");return m(".ExtensionPage-settings",[m(".container",[m("Form",{onsubmit:this.onsubmit.bind(this)},[m(".SettingsGroup",[m(".Settings",[m("label",i.a.translator.trans("block-cat-default.admin.settings.title")),this.settingStates.hideMainPageMenu?"":m(".Form-group",[m("label",i.a.translator.trans("block-cat-default.admin.settings.icon")),m(".helpText",i.a.translator.trans("block-cat-default.admin.settings.icon_help_text",{text:e})),m(".inline",""!==this.settings.allDiscussionsIcon?y()(this.settings.allDiscussionsIcon):"",""!==this.settings.allDiscussionsIcon?m("span",i.a.translator.trans("core.admin.basics.all_discussions_label")):"",m("input.FormControl",{type:"text",placeholder:"far fa-comments",value:this.settings.allDiscussionsIcon,oninput:function(e){t.settings.allDiscussionsIcon=e.target.value,t.modified=!0}}))]),Object.keys(this.settings).map((function(e){if("allDiscussionsIcon"!==e)return"refreshButton"===e||"markAllAsReadButton"===e?[t.settingStates.hideToolBar?"":m(".Form-group",[u.a.component({state:t.settings[e]||!1,onchange:function(){t.settings[e]^=!0,t.modified=!0}},m("li",i.a.translator.trans("block-cat-default.admin.settings."+e))),m(".helpText",i.a.translator.trans("block-cat-default.admin.settings."+e+"_help_text"))])]:"controlsButton"===e||"scrubberDiv"===e?[t.settingStates.hideDiscussionMenu?"":m(".Form-group",[u.a.component({state:t.settings[e]||!1,onchange:function(){t.settings[e]^=!0,t.modified=!0}},m("li",i.a.translator.trans("block-cat-default.admin.settings."+e))),m(".helpText",i.a.translator.trans("block-cat-default.admin.settings."+e+"_help_text"))])]:[m(".Form-group",[u.a.component({state:t.settings[e]||!1,onchange:function(){t.settings[e]^=!0,t.modified=!0,"mainPageMenu"===e&&(t.settingStates.hideMainPageMenu^=!0),"toolbar"===e&&(t.settingStates.hideToolBar^=!0),"discussionMenu"===e&&(t.settingStates.hideDiscussionMenu^=!0)}},m("li",i.a.translator.trans("block-cat-default.admin.settings."+e))),m(".helpText",i.a.translator.trans("block-cat-default.admin.settings."+e+"_help_text"))])]}))]),m(".Routes",[m("label",i.a.translator.trans("block-cat-default.admin.routes.title")),Object.keys(this.routes).map((function(e){if(("flags"!==e||h()("flarum-flags"))&&("following"!==e||h()("flarum-subscriptions"))&&("tag"!==e&&"tags"!==e||h()("flarum-tags"))&&("user.mentions"!==e||h()("flarum-mentions"))&&("user.uploads"!==e||h()("fof-upload")))return m(".Form-group",[m("label",i.a.translator.trans("block-cat-default.admin.routes.route_label",{route:e})),m(".helpText",i.a.translator.trans("block-cat-default.admin.routes."+e)),m(".Default-Routes-Field",{className:t.routes[e].path?"Default-Routes-Field--with-value":"",title:e},[m(".Default-Routes-Field-Wrap",[m("input.FormControl.Default-Routes-Input",{type:"text",value:t.routes[e].path,pattern:t.routes[e].regex,oninput:function(n){""!==n.target.value?null!==n.target.value.match(n.target.pattern)?n.target.style.borderColor="green":n.target.style.borderColor="red":$(n.target).removeAttr("style"),t.routes[e].path=n.target.value,t.modified=!0},onfocusout:function(t){$(t.target).removeAttr("style")},onfocus:function(t){""!==t.target.value&&(null!==t.target.value.match(t.target.pattern)?t.target.style.borderColor="green":t.target.style.borderColor="red")}}),m(".Default-Routes-Placeholder",[m("span.Default-Routes-Placeholder-Hint",i.a.translator.trans("block-cat-default.admin.routes.hint"))," ",m("span",t.routes[e].placeholder)])])])])}))])]),d.a.component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.modified},i.a.translator.trans("core.admin.edit_header.submit_button"))])])])},n.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0;var n=0;if(Object.keys(this.routes).map((function(t){Object.keys(e.routes).map((function(a){""!==e.routes[t].path&&t!==a&&e.routes[t].path===e.routes[a].path&&($('.Default-Routes-Field[title="'+t+'"] > div > input').css("border-color","red"),n++)}))})),n>0)return i.a.alerts.show(v.a,{type:"error"},i.a.translator.trans("block-cat-default.admin.routes.same_value")),this.loading=!1,void(this.modified=!1);try{var a;p()(((a={})["block-cat.default_settings"]=JSON.stringify(this.settings),a["block-cat.default_routes"]=JSON.stringify(this.routes),a)),i.a.alerts.show(v.a,{type:"success"},i.a.translator.trans("core.admin.settings.saved_message"))}catch(t){i.a.alerts.show(v.a,{type:"error"},i.a.translator.trans("core.lib.error.generic_message"))}finally{this.settings=JSON.parse(i.a.data.settings["block-cat.default_settings"]),this.routes=JSON.parse(i.a.data.settings["block-cat.default_routes"]),this.loading=!1,this.modified=!1}},e}(o.a);app.initializers.add("block-cat/portlet-ui",(function(){app.extensionData.for("block-cat-portlet-ui").registerPage(x)}))},9:function(t,e){t.exports=flarum.core.compat["utils/isExtensionEnabled"]}});
//# sourceMappingURL=admin.js.map